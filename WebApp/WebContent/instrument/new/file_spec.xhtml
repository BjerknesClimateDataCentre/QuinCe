<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:jsf="http://xmlns.jcp.org/jsf"
	xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	template="/templates/app_page.xhtml">
	
	<f:metadata>
		<f:viewParam name="separator" value="#{newInstrumentBean.separator}"/>
		<f:viewParam name="dateFormat" value="#{columnSpecBean.dateFormat}"/>
		<f:viewParam name="timeFormat" value="#{columnSpecBean.timeFormat}"/>
		<f:viewParam name="lonFormat" value="#{columnSpecBean.lonFormat}"/>
		<f:viewParam name="latFormat" value="#{columnSpecBean.latFormat}"/>
		<f:viewParam name="hasAtmosphericPressure" value="#{columnSpecBean.hasAtmosphericPressure}"/>
		<f:viewParam name="samplesDried" value="#{newInstrumentBean.samplesDried}"/>
	</f:metadata>
	
	<ui:define name="title">
		New Instrument
	</ui:define>

	<ui:define name="localHead">
		<script type="text/javascript">
        $(function() {
            $('[id^=separator_]').click(function() {
                $('#instrumentForm\\:otherSeparatorChar').attr('disabled', instrumentForm.separator.value != 'other');
            });
          });
		</script>
	</ui:define>
	
	<ui:define name="content">
		<h1>#{newInstrumentBean.name}</h1>
		
        <div class="fullPage">
            <h:form id="instrumentForm" method="post" accept-charset="utf8">
                <div class="sectionHeader">
                	File separator
                </div>
                <div class="instructions">
                	Please specify the character used to separate columns in your data file
                	<br/>
                	
                </div>
                <div class="sectionContent">
                    <table class="form">
                        <tr>
                            <td width="25%">
                            	<input type="radio" name="separator" id="separator_comma" jsf:id="separatorComma" a:name="separator" value="comma">
                            		<c:if test="#{newInstrumentBean.separator.equals('comma')}">
                            			<f:passThroughAttribute name="checked" value="checked"/>
                            		</c:if>
                            	</input><label id="separatorCommaLabel" for="separator_comma"> Comma</label>
                            </td>
                            <td width="25%">
                            	<input type="radio" name="separator" id="separator_tab" jsf:id="separatorTab" a:name="separator" value="tab">
                            		<c:if test="#{newInstrumentBean.separator.equals('tab')}">
    	                        		<f:passThroughAttribute name="checked" value="checked"/>
    	                        	</c:if>
                            	</input><label id="separatorTabLabel" for="separator_tab"> Tab</label>
                            </td>
                            <td width="25%">
                            	<input type="radio" name="separator" id="separator_space" jsf:id="separatorSpace" a:name="separator" value="space">
                            		<c:if test="#{newInstrumentBean.separator.equals('space')}">
    	                        		<f:passThroughAttribute name="checked" value="checked"/>
    	                        	</c:if>
                            	</input><label id="separatorSpaceLabel" for="separator_space"> Space</label>
                            </td>
                            <td width="25%">
                            	<input type="radio" name="separator" id="separator_other" jsf:id="separatorOther" a:name="separator" value="other">
                            		<c:if test="#{newInstrumentBean.separator.equals('other')}">
	                            		<f:passThroughAttribute name="checked" value="checked"/>
	                            	</c:if>
                            	</input><label id="separatorOtherLabel" for="separator_other"> Other </label>
                            	<h:inputText id="otherSeparatorChar" value="#{newInstrumentBean.otherSeparatorChar}" maxlength="1" size="3" disabled="#{!(newInstrumentBean.separator.equals('other'))}"/>
                            </td>
                        </tr>
                        <tr>
                        	<td colspan="3">
								<h:message id="otherSeparatorCharMessage" for="otherSeparatorChar" errorClass="error"/> 
                        	</td>
                        </tr>
                    </table>
                </div>
                <div class="sectionHeader">
                    Date/Time Format
                </div>
                <div class="sectionContent">
                    <div class="instructions">
                        Please select the date format used in your data file.
                    </div>
                    <table class="form">
                        <tr>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_separate" jsf:id="dateFormatSeparate" a:name="dateFormat" value="separate">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('separate')}">
                                		<f:passThroughAttribute name="checked" value="checked"/>
                                	</c:if>
                                </input><label id="date_separateLabel" for="date_separate"> Separate Fields</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_ddmmyy" jsf:id="dateFormatDDMMYY" a:name="dateFormat" value="DDMMYY">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('DDMMYY')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="date_ddmmyyLabel" for="date_ddmmyy"> DD/MM/YY</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_mmddyy" jsf:id="dateFormatMMDDYY" a:name="dateFormat" value="MMDDYY">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('MMDDYY')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="date_mmddyyLabel" for="date_mmddyy"> MM/DD/YY</label>
                            </td>
                        </tr>
                        <tr>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_yyyymmdd" jsf:id="dateFormatYYYYMMDD" a:name="dateFormat" value="YYYYMMDD">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('YYYYMMDD')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="date_yyyymmddLabel" for="date_yyyymmdd"> YYYYMMDD</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_ddmmyyyy" jsf:id="dateFormatDDMMYYYY" a:name="dateFormat" value="DDMMYYYY">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('DDMMYYYY')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="date_ddmmyyyyLabel" for="date_ddmmyyyy"> DD/MM/YYYY</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="dateFormat" id="date_mmddyyyy" jsf:id="dateFormatMMDDYYYY" a:name="dateFormat" value="MMDDYYYY">
                            		<c:if test="#{columnSpecBean.dateFormat.equals('MMDDYYYY')}">
    	                            	<f:passThroughAttribute name="checked" value="checked"/>
    	                            </c:if>
                                </input><label id="date_mmddyyyyLabel" for="date_mmddyyyy"> MM/DD/YYYY</label>
                            </td>
                        </tr>
                    </table>
                    <div class="instructions">
                        Please select the time format used in your data file.
                    </div>
                    <table class="form">
                        <tr>
                            <td width="33%">
                                <input type="radio" name="timeFormat" id="time_separate" jsf:id="timeFormatSeparate" a:name="timeFormat" value="separate">
                            		<c:if test="#{columnSpecBean.timeFormat.equals('separate')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="time_separateLabel" for="time_separate"> Separate Fields</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="timeFormat" id="time_no_colon" jsf:id="timeFormatNoColon" a:name="timeFormat" value="no_colon_time">
                            		<c:if test="#{columnSpecBean.timeFormat.equals('no_colon_time')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="time_no_colonLabel" for="time_no_colon"> HHMMSS</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="timeFormat" id="time_colon" jsf:id="timeFormatColon" a:name="timeFormat" value="colon_time">
                            		<c:if test="#{columnSpecBean.timeFormat.equals('colon_time')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="time_colonLabel" for="time_colon"> HH:MM:SS</label>
                            </td>
                        </tr>
                    </table>
                </div>
                <div class="sectionHeader">
                    Longitude/Latitude Format
                </div>
                <div class="sectionContent">
                    <div class="instructions">
                        Please select the format of the longitude data
                    </div>
                    <table class="form">
                        <tr>
                            <td width="33%">
                                <input type="radio" name="lonFormat" id="lon_0_360" jsf:id="lonFormat0-360" a:name="lonFormat" value="0_360_lon">
                            		<c:if test="#{columnSpecBean.lonFormat.equals('0_360_lon')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="lon_0_360Label" for="lon_0_360"> 0 to 360</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="lonFormat" id="lon_minus180_180" jsf:id="lonFormatminus180-180" a:name="lonFormat" value="minus180_180_lon">
                            		<c:if test="#{columnSpecBean.lonFormat.equals('minus180_180_lon')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="lon_minus180_180Label" for="lon_minus180_180"> -180 to 180</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="lonFormat" id="lon_0_180" jsf:id="lonFormat0-180" a:name="lonFormat" value="0_180_lon">
                            		<c:if test="#{columnSpecBean.lonFormat.equals('0_180_lon')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="lon_0_180Label" for="lon_0_180"> 0 to 180 (N/S in a separate column)</label>
                            </td>
                        </tr>
                    </table>
                    <div class="instructions">
                        Please select the format of the latitude data
                    </div>
                    <table class="form">
                        <tr>
                            <td width="33%">
                                <input type="radio" name="latFormat" id="lat_minus90_90" jsf:id="lonFormatMinus90-90" a:name="latFormat" value="minus90_90_lat">
                            		<c:if test="#{columnSpecBean.latFormat.equals('minus90_90_lat')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="lat_minus90_90Label" for="lat_minus90_90"> -90 to 90</label>
                            </td>
                            <td width="33%">
                                <input type="radio" name="latFormat" id="lat_0_90" jsf:id="lonFormat0-90" a:name="latFormat" value="0_90_lat">
                            		<c:if test="#{columnSpecBean.latFormat.equals('0_90_lat')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="lat_0_90Label" for="lat_0_90"> 0 to 90 (E/W in a separate column)</label>
                            </td>
                            <td width="33%"></td>
                        </tr>
                    </table>
                </div>
                <div class="sectionHeader">
                    Other Data
                </div>
                <div class="sectionContent">
                    <table class="form">
                        <tr>
                            <td width="50%">
                            	<b>Does the instrument record atmospheric pressure?</b>
                            </td>
                            <td width="50%">
                            	<input type="radio" class="inlineRadio" name="hasAtmosphericPressure" id="hasAtmosphericPressure_true" jsf:id="hasAtmosphericPressure_true" a:name="hasAtmosphericPressure" value="true">
                            		<c:if test="#{columnSpecBean.hasAtmosphericPressure.equals('true')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="hasAtmosphericPressure_trueLabel" for="hasAtmosphericPressure_true"> Yes </label>
                            	<input type="radio" class="inlineRadio" name="hasAtmosphericPressure" id="hasAtmosphericPressure_false" jsf:id="hasAtmosphericPressure_false" a:name="hasAtmosphericPressure" value="false">
                            		<c:if test="#{columnSpecBean.hasAtmosphericPressure.equals('false')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="hasAtmosphericPressure_falseLabel" for="hasAtmosphericPressure_false"> No</label>
                            </td>
                        </tr>
                        <tr>
                            <td width="50%">
                            	<b>Are samples *completely* dried before being analysed?</b>
                            </td>
                            <td width="50%">
                            	<input type="radio" class="inlineRadio" name="samplesDried" id="samplesDried" jsf:id="samplesDried_true" a:name="samplesDried" value="true">
                            		<c:if test="#{newInstrumentBean.samplesDried.equals('true')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="samplesDried_trueLabel" for="samplesDried_true"> Yes </label>
                            	<input type="radio" class="inlineRadio" name="samplesDried" id="samplesDried" jsf:id="samplesDried_false" a:name="samplesDried" value="false">
                            		<c:if test="#{newInstrumentBean.samplesDried.equals('false')}">
	                                	<f:passThroughAttribute name="checked" value="checked"/>
	                                </c:if>
                                </input><label id="samplesDried_trueLabel" for="samplesDried_true"> No</label>
                            </td>
                        </tr>
                    </table>
                </div>
	            <div class="buttonWrapper">
	            	<h:commandButton id="prevButton" value="Previous" action="#{newInstrumentBean.goToNamesFromFileSpec}"/>
	            	<h:commandButton id="nextButton" value="Next" action="#{newInstrumentBean.goToSampleUploadFromFileSpec}"/>
	                <button onclick="cancelInstrument()">Cancel</button>
	            </div>
	        </h:form>
    	</div>
	</ui:define>
</ui:composition>