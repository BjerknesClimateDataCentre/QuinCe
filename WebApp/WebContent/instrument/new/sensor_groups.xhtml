<ui:composition xmlns="http://www.w3.org/1999/xhtml"
  xmlns:h="http://xmlns.jcp.org/jsf/html"
  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
  xmlns:f="http://xmlns.jcp.org/jsf/core" xmlns:p="http://primefaces.org/ui"
  xmlns:c="http://java.sun.com/jsp/jstl/core"
  template="/WEB-INF/templates/new_instrument.xhtml">
  <ui:define name="instrumentHead">
    <h:outputScript name="script/newInstrument/sensorGroups.js" />
    <h:outputStylesheet name="style/sensorGroups.css" />
    <c:set var="instrumentStep" value="5" scope="request" />
    <script>
    </script>
  </ui:define>
  <ui:define name="new_instrument_content">
    <h:form id="newInstrumentForm" method="post" charset="utf8">
      <p:defaultCommand target="nextButton" />
      <div id="groupTables">
        <ui:repeat value="#{newInstrumentBean.sensorGroups.asList()}" var="group">
          <div class="sensorGroup">
            <div class="groupName">
              <h:outputText value="#{group.name}"/>
            </div>
            <p:dataTable value="#{group.members}" var="member" tableStyleClass="groupTable" resizableColumns="true">
              <p:column headerText="Sensor" styleClass="sensorName">
                <h:outputText value="#{member.sensorName}"/>
              </p:column>
            </p:dataTable>
          </div>
        </ui:repeat>
      </div> 
      <!--  The cancel include has a 2 entries (1 is invisible) -->
      <h:panelGrid columns="4" cellpadding="5" styleClass="buttonPanel">
        <ui:include src="/WEB-INF/templates/new_instrument_cancel.xhtml" />
        <p:commandButton value="Back" ajax="false"
          action="#{newInstrumentBean.goToRunTypes}" immediate="true" />
        <p:commandButton id="nextButton" value="Save" ajax="false"
          action="#{newInstrumentBean.saveInstrument}" />
      </h:panelGrid>
    </h:form>
  </ui:define>
</ui:composition>
