<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="/WEB-INF/templates/plot_page.xhtml">

	<ui:param name="beanName" value="reviewCalibrationDataBean"/>

	<ui:define name="title">Calibration Data</ui:define>
	<ui:define name="localHead">
		<h:outputScript name="script/reviewCalibrationData.js"/>
		<h:outputStylesheet name="style/reviewCalibrationData.css"/>
	</ui:define>
	
	<ui:define name="formEntries">
		<h:inputHidden id="plotLabels" value="#{reviewCalibrationDataBean.plotLabels}"/>
		<h:inputHidden id="plotData" value="#{reviewCalibrationDataBean.plotData}"/>
		<p:commandLink id="setUseCalibrations" action="#{reviewCalibrationDataBean.setCalibrationUse}" ajax="true" process="useCalibrations useCalibrationsMessage selectedRows" update="@none"/>
	</ui:define>
	
	<ui:define name="dataSetName">#{reviewCalibrationDataBean.dataset.name} - Calibration Data #{requestScope[beanName]}</ui:define>
	
	<ui:define name="plots">
		<div id="treeContainer">
			<p:tree id="standardName" value="#{reviewCalibrationDataBean.gasStandardsTree}" selection="#{reviewCalibrationDataBean.selectedStandard}" var="node" selectionMode="single">
				<p:ajax event="select" listener="#{reviewCalibrationDataBean.reloadPageData}" process="@this" update="plotPageForm:plotData, plotPageForm:plotLabels plotPageForm:tableJsonData plotPageForm:tableDataDraw plotPageForm:recordCount" oncomplete="drawPage()"/>
				<p:treeNode>
					<h:outputText value="#{node}"/>
				</p:treeNode>
			</p:tree>
		</div>
		<div id="standardsPlotContainer">
			Standards plot is here
		</div>
	</ui:define>
	
	<ui:define name="selectionDialog">
		<p:dialog widgetVar="useDialog" modal="true" header="Use Selected Calibrations?">
			<div class="insructions">
				Should these calibrations be used?
				<p:selectOneRadio id="useCalibrations" widgetVar="useCalibrationsWidget" value="#{reviewCalibrationDataBean.useCalibrations}" onchange="updateUseDialogControls()">
					<f:selectItem itemLabel="Yes" itemValue="true"/>
					<f:selectItem itemLabel="No" itemValue="false"/>
				</p:selectOneRadio>
				<div id="reasonSection">
					<p:outputLabel for="useCalibrationsMessage" value="Reason:"/>
					<br/>
					<p:inputTextarea id="useCalibrationsMessage" widgetVar="useCalibrationsMessageWidget" rows="4" cols="40" value="#{reviewCalibrationDataBean.useCalibrationsMessage}" onkeyup="updateUseDialogControls()"/>
				</div>
				<h:panelGrid columns="2" styleClass="buttonPanel">
					<p:commandButton widgetVar="okButtonWidget" value="OK" onclick="storeCalibrationSelection();"/>
					<p:commandButton value="Cancel" onclick="PF('useDialog').hide();"/>
				</h:panelGrid>
			</div>
		</p:dialog>
	</ui:define>
	<ui:define name="selectionActions">
		<p:commandButton widgetVar="useCalibrationsButton" value="Use Calibrations?" onclick="showUseDialog();" styleClass="inlineButton"/>
	</ui:define>
	<ui:define name="finishButton">
		<p:commandButton value="Finish" ajax="false" process="@none" action="#{reviewCalibrationDataBean.finish}" styleClass="inlineButton"/>
	</ui:define>

</ui:composition>